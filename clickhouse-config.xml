<?xml version="1.0"?>
<yandex>
    <http_port>8123</http_port>
    <tcp_port>9000</tcp_port>
    <interserver_http_port>9009</interserver_http_port>
    <max_connections>4096</max_connections>
    <keep_alive_timeout>3</keep_alive_timeout>
    <max_concurrent_queries>100</max_concurrent_queries>
    <uncompressed_cache_size>8589934592</uncompressed_cache_size>
    <mark_cache_size>5368709120</mark_cache_size>
    <path>/var/lib/clickhouse/</path>
    <tmp_path>/var/lib/clickhouse/tmp/</tmp_path>
    <user_files_path>/var/lib/clickhouse/user_files/</user_files_path>
    <users_config>users.xml</users_config>
    <default_profile>default</default_profile>
    <default_database>default</default_database>
    <timezone>Europe/London</timezone>
    <max_session_timeout>3600</max_session_timeout>
    <default_session_timeout>60</default_session_timeout>
    <dictionaries_config>*_dictionary.xml</dictionaries_config>
    <merge_tree>
        <enable_mixed_granularity_parts>1</enable_mixed_granularity_parts>
        <max_suspicious_broken_parts>5</max_suspicious_broken_parts>
    </merge_tree>
    <format_schema_path>/var/lib/clickhouse/format_schemas/</format_schema_path>
  <graphite_rollup>
    <path_column_name>Path</path_column_name>
    <time_column_name>Time</time_column_name>
    <value_column_name>Value</value_column_name>
    <version_column_name>Timestamp</version_column_name>
    <pattern>
      <regexp>^collectd\..*\.mongo-.*\.(file_size-data|file_size-index|file_size-storage|gauge-collections|gauge-indexes|gauge-num_extents|gauge-object_count)$</regexp>
      <function>avg</function>
      <retention>
        <age>0</age>
        <precision>1200</precision>
      </retention>
    </pattern>
    <pattern>
      <regexp>\.lower$</regexp>
      <function>min</function>
      <retention>
        <age>0</age>
        <precision>60</precision>
      </retention>
      <retention>
        <age>7776000</age>
        <precision>600</precision>
      </retention>
    </pattern>
    <pattern>
      <regexp>\.upper$</regexp>
      <function>max</function>
      <retention>
        <age>0</age>
        <precision>60</precision>
      </retention>
      <retention>
        <age>7776000</age>
        <precision>600</precision>
      </retention>
    </pattern>
    <pattern>
      <regexp>\.sum$</regexp>
      <function>sum</function>
      <retention>
        <age>0</age>
        <precision>60</precision>
      </retention>
      <retention>
        <age>7776000</age>
        <precision>600</precision>
      </retention>
    </pattern>
    <pattern>
      <regexp>\.count$</regexp>
      <function>max</function>
      <retention>
        <age>0</age>
        <precision>60</precision>
      </retention>
      <retention>
        <age>7776000</age>
        <precision>600</precision>
      </retention>
    </pattern>
    <pattern>
      <regexp>^telemetry\.telescope\.asg\..*</regexp>
      <function>max</function>
      <retention>
        <age>0</age>
        <precision>3600</precision>
      </retention>
    </pattern>
    <default>
      <function>avg</function>
      <retention>
        <age>0</age>
        <precision>60</precision>
      </retention>
      <retention>
        <age>7776000</age>
        <precision>600</precision>
      </retention>
    </default>
  </graphite_rollup>
</yandex>

